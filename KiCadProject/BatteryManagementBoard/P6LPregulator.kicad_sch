(kicad_sch (version 20211123) (generator eeschema)

  (uuid 909f9789-092e-4a87-b58d-f347f521857c)

  (paper "A4")

  (lib_symbols
    (symbol "Device:C" (pin_numbers hide) (pin_names (offset 0.254)) (in_bom yes) (on_board yes)
      (property "Reference" "C" (id 0) (at 0.635 2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "C" (id 1) (at 0.635 -2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "" (id 2) (at 0.9652 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (id 3) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "cap capacitor" (id 4) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Unpolarized capacitor" (id 5) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "C_*" (id 6) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "C_0_1"
        (polyline
          (pts
            (xy -2.032 -0.762)
            (xy 2.032 -0.762)
          )
          (stroke (width 0.508) (type default) (color 0 0 0 0))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.032 0.762)
            (xy 2.032 0.762)
          )
          (stroke (width 0.508) (type default) (color 0 0 0 0))
          (fill (type none))
        )
      )
      (symbol "C_1_1"
        (pin passive line (at 0 3.81 270) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:C_Polarized" (pin_numbers hide) (pin_names (offset 0.254)) (in_bom yes) (on_board yes)
      (property "Reference" "C" (id 0) (at 0.635 2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "C_Polarized" (id 1) (at 0.635 -2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "" (id 2) (at 0.9652 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (id 3) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "cap capacitor" (id 4) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Polarized capacitor" (id 5) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "CP_*" (id 6) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "C_Polarized_0_1"
        (rectangle (start -2.286 0.508) (end 2.286 1.016)
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.778 2.286)
            (xy -0.762 2.286)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -1.27 2.794)
            (xy -1.27 1.778)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
        (rectangle (start 2.286 -0.508) (end -2.286 -1.016)
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type outline))
        )
      )
      (symbol "C_Polarized_1_1"
        (pin passive line (at 0 3.81 270) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Eldalote_symbols:BD433M5FP" (in_bom yes) (on_board yes)
      (property "Reference" "U" (id 0) (at -5.08 3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "BD433M5FP" (id 1) (at 7.62 -5.08 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "Package_TO_SOT_SMD:TO-252-3_TabPin4" (id 2) (at 22.86 -7.62 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (id 3) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "BD433M5FP_0_1"
        (rectangle (start -6.35 2.54) (end 6.35 -3.81)
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type background))
        )
      )
      (symbol "BD433M5FP_1_1"
        (pin power_in line (at -8.89 0 0) (length 2.54)
          (name "VCC" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin no_connect line (at -3.81 -6.35 90) (length 2.54) hide
          (name "N.C." (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
        (pin power_out line (at 8.89 0 180) (length 2.54)
          (name "VOUT" (effects (font (size 1.27 1.27))))
          (number "3" (effects (font (size 1.27 1.27))))
        )
        (pin power_in line (at 0 -6.35 90) (length 2.54)
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "4" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:+3.3V" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (id 0) (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "+3.3V" (id 1) (at 0 3.556 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (id 2) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (id 3) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "power-flag" (id 4) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"+3.3V\"" (id 5) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "+3.3V_0_1"
        (polyline
          (pts
            (xy -0.762 1.27)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 0)
            (xy 0 2.54)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 2.54)
            (xy 0.762 1.27)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
      )
      (symbol "+3.3V_1_1"
        (pin power_in line (at 0 0 90) (length 0) hide
          (name "+3.3V" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:GND" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (id 0) (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "GND" (id 1) (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (id 2) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (id 3) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "power-flag" (id 4) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"GND\" , ground" (id 5) (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "GND_0_1"
        (polyline
          (pts
            (xy 0 0)
            (xy 0 -1.27)
            (xy 1.27 -1.27)
            (xy 0 -2.54)
            (xy -1.27 -1.27)
            (xy 0 -1.27)
          )
          (stroke (width 0) (type default) (color 0 0 0 0))
          (fill (type none))
        )
      )
      (symbol "GND_1_1"
        (pin power_in line (at 0 0 270) (length 0) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 95.25 91.44) (diameter 0) (color 0 0 0 0)
    (uuid 24abcf21-15e0-45f7-ba8a-38caa6189f51)
  )
  (junction (at 151.13 91.44) (diameter 0) (color 0 0 0 0)
    (uuid 3c90c56e-2bf9-4fb0-94c6-fa5a132c7fb1)
  )
  (junction (at 119.38 91.44) (diameter 0) (color 0 0 0 0)
    (uuid 72cf6ccf-f64b-4367-8eaf-10ca4fd36e50)
  )
  (junction (at 127 106.68) (diameter 0) (color 0 0 0 0)
    (uuid 7af5e9d9-67e9-4383-9ad0-0f6c3f578920)
  )
  (junction (at 119.38 106.68) (diameter 0) (color 0 0 0 0)
    (uuid b028b17e-0acc-479c-9711-98bcd8326b83)
  )
  (junction (at 134.62 106.68) (diameter 0) (color 0 0 0 0)
    (uuid da34f07f-121a-4d93-9fbc-02e1432fc424)
  )

  (wire (pts (xy 119.38 101.6) (xy 119.38 106.68))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 0e2e1393-9de3-4c76-901e-842063b2f279)
  )
  (wire (pts (xy 119.38 91.44) (xy 119.38 93.98))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 1ecae160-89bc-4167-991f-e46b2a18dfab)
  )
  (wire (pts (xy 95.25 91.44) (xy 119.38 91.44))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 20a5fc7d-58eb-40b8-838f-494b084b80b7)
  )
  (wire (pts (xy 95.25 93.98) (xy 95.25 91.44))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 2155766c-0bcd-47db-b7c6-6ad7adc5e88f)
  )
  (wire (pts (xy 119.38 91.44) (xy 125.73 91.44))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 23e47ffb-1098-47b1-9458-35dbb193f1a9)
  )
  (wire (pts (xy 127 106.68) (xy 127 110.49))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 2a3003e3-3baa-4756-a332-90640d409e19)
  )
  (wire (pts (xy 151.13 91.44) (xy 143.51 91.44))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 33f8eebb-ef35-4343-9b33-dec597b3c837)
  )
  (wire (pts (xy 134.62 97.79) (xy 134.62 106.68))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 38e205f1-1ca2-4d92-a9d5-ed4921d5d76a)
  )
  (wire (pts (xy 151.13 106.68) (xy 134.62 106.68))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 7384fb7b-14aa-49bf-8c4d-bbe97dea13f8)
  )
  (wire (pts (xy 95.25 101.6) (xy 95.25 106.68))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 7d089068-6f8c-460f-be6b-6a6a45bbb32d)
  )
  (wire (pts (xy 151.13 101.6) (xy 151.13 106.68))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 88b88f65-71f2-480e-8447-4fab3ad3a87e)
  )
  (wire (pts (xy 95.25 106.68) (xy 119.38 106.68))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid 9ec4d95d-9a74-4a77-9a35-f089734611e9)
  )
  (wire (pts (xy 154.94 91.44) (xy 151.13 91.44))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid a4f749c5-6abf-4422-833b-dd8e12eb2dd8)
  )
  (wire (pts (xy 92.71 91.44) (xy 95.25 91.44))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid c6aa0573-8ce4-49f0-aaaf-4e3c79feafae)
  )
  (wire (pts (xy 134.62 106.68) (xy 127 106.68))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid d187cfda-85c1-4a7c-8863-4ac1ddf2ef47)
  )
  (wire (pts (xy 127 106.68) (xy 119.38 106.68))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid eb73da18-ec95-4aac-b375-3ff266723858)
  )
  (wire (pts (xy 151.13 93.98) (xy 151.13 91.44))
    (stroke (width 0) (type default) (color 0 0 0 0))
    (uuid f9ce77d2-503c-4563-b668-c01fdff97306)
  )

  (text "Worst case average consumption while in use estimation\n\nESP32 average consumption ~ 60mA\nSTM32 average consumption ~ 50mA\nHall sensors average consumption ~ 20mA\npower status LEDs average consumption ~ 25mA\nTotal worst case average consumption: ~145mA\nWhile an LDO from 16.8V to 3.3V wastes a lot of energy,\nthe consumption should be low enough to not impact working life\nsignificantly"
    (at 167.64 114.3 0)
    (effects (font (size 2 2)) (justify left bottom))
    (uuid 16d98bf2-4a1b-47f4-9802-0be70cb1ba57)
  )
  (text "Maximum consumption estimation\n\nESP32 max consumption ~ 130mA\nSTM32 max consumption ~ 100mA\nHall sensors max consumption ~ 20mA\npower status leds max consumption ~ 40mA\nTotal max: ~290mA \n30% margin: ~380mA\n"
    (at 20.32 110.49 0)
    (effects (font (size 2 2)) (justify left bottom))
    (uuid 9b0e40f9-8dec-4fcf-b08f-659911e76f38)
  )
  (text "Selected LDO has maximum Vin of 42V, max 500mA current\n175uA Quiescent current\n"
    (at 97.79 123.19 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid dd2866aa-9faa-48e5-80e1-11acbc4ac568)
  )
  (text "3.3V Regulator" (at 115.57 44.45 0)
    (effects (font (size 4 4) (thickness 0.8) bold) (justify left bottom))
    (uuid f133894a-e14c-4b82-84a3-ce3f6be5d7bf)
  )

  (global_label "VOUT" (shape input) (at 92.71 91.44 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify right))
    (uuid a2677f02-213a-4241-a1d2-a4940a81d942)
    (property "Intersheet References" "${INTERSHEET_REFS}" (id 0) (at 85.5798 91.3606 0)
      (effects (font (size 1.27 1.27)) (justify right) hide)
    )
  )

  (symbol (lib_id "Eldalote_symbols:BD433M5FP") (at 134.62 91.44 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid 38e94db3-ee79-4c05-82ab-aca1d01efb6e)
    (property "Reference" "U601" (id 0) (at 134.62 83.82 0))
    (property "Value" "BD433M5FP" (id 1) (at 134.62 86.36 0))
    (property "Footprint" "Package_TO_SOT_SMD:TO-252-3_TabPin4" (id 2) (at 157.48 99.06 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (id 3) (at 134.62 91.44 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 648bd899-4b33-40fe-a7b2-20eff19f60a5))
    (pin "2" (uuid 316e5bb0-f8d4-440c-9483-a12a57abfc56))
    (pin "3" (uuid 5cc2c970-6997-40b1-854e-038e6da28520))
    (pin "4" (uuid 3e07b99f-4bc7-4b69-99ff-8ff540398157))
  )

  (symbol (lib_id "power:+3.3V") (at 154.94 91.44 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid 5ae48ea4-e03f-4da6-8932-2110e697ad93)
    (property "Reference" "#PWR0602" (id 0) (at 154.94 95.25 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "+3.3V" (id 1) (at 154.94 86.36 0))
    (property "Footprint" "" (id 2) (at 154.94 91.44 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (id 3) (at 154.94 91.44 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid d4e04c99-e7b8-499b-8276-9b153906ec23))
  )

  (symbol (lib_id "Device:C_Polarized") (at 95.25 97.79 0) (unit 1)
    (in_bom yes) (on_board yes)
    (uuid 6a867d97-793e-4d84-b577-f0a4efe389cd)
    (property "Reference" "C601" (id 0) (at 96.52 95.25 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "22u" (id 1) (at 96.52 100.33 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:CP_Elec_5x5.3" (id 2) (at 96.2152 101.6 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (id 3) (at 95.25 97.79 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 6e3076ef-d29f-48cf-9480-1547f59ac596))
    (pin "2" (uuid a2efd9d6-c83d-4dc5-8200-35f369d693cf))
  )

  (symbol (lib_id "power:GND") (at 127 110.49 0) (unit 1)
    (in_bom yes) (on_board yes) (fields_autoplaced)
    (uuid 7f7e97ff-25bb-4015-b764-5a877162e4b4)
    (property "Reference" "#PWR0601" (id 0) (at 127 116.84 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (id 1) (at 127 115.57 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Footprint" "" (id 2) (at 127 110.49 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (id 3) (at 127 110.49 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 5290b825-1fec-4121-a1b6-c470131a0d96))
  )

  (symbol (lib_id "Device:C") (at 151.13 97.79 0) (unit 1)
    (in_bom yes) (on_board yes)
    (uuid f648d38f-770a-4049-a706-581e513218ff)
    (property "Reference" "C603" (id 0) (at 152.4 95.25 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "10u" (id 1) (at 152.4 100.33 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0805_2012Metric" (id 2) (at 152.0952 101.6 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (id 3) (at 151.13 97.79 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid b3a193d5-07c8-4956-8741-d35c0086c5cf))
    (pin "2" (uuid 70a7a941-782c-41cc-9475-3957d09fc073))
  )

  (symbol (lib_id "Device:C") (at 119.38 97.79 0) (unit 1)
    (in_bom yes) (on_board yes)
    (uuid ff5bbe6f-84ff-43fe-a9d5-43bef5f236e7)
    (property "Reference" "C602" (id 0) (at 120.65 95.25 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100n" (id 1) (at 120.65 100.33 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_SMD:C_0402_1005Metric" (id 2) (at 120.3452 101.6 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (id 3) (at 119.38 97.79 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 3097e345-94ec-4b38-8355-0c53a5fafdf4))
    (pin "2" (uuid 2343ab45-3b28-4ace-899b-e0412a360197))
  )
)
